(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[4],{107:function(e,t,n){},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(16),r=n(45),c=n(6),s=["count","wrapper","className","containerClassName","containerTestId","circle","style"],a=c.createContext({});function i(e){var t,n,i=e.count,l=void 0===i?1:i,u=e.wrapper,f=e.className,d=e.containerClassName,j=e.containerTestId,p=e.circle,h=void 0!==p&&p,b=e.style,m=Object(r.a)(e,s),O=c.useContext(a),x=Object(o.a)(Object(o.a)(Object(o.a)({},O),m),{},{circle:h}),w=Object(o.a)(Object(o.a)({},b),function(e){var t=e.baseColor,n=e.highlightColor,o=e.width,r=e.height,c=e.borderRadius,s=e.circle,a=e.direction,i=e.duration,l=e.enableAnimation,u=void 0===l||l,f={};return"rtl"===a&&(f["--animation-direction"]="reverse"),"number"===typeof i&&(f["--animation-duration"]="".concat(i,"s")),u||(f["--pseudo-element-display"]="none"),"string"!==typeof o&&"number"!==typeof o||(f.width=o),"string"!==typeof r&&"number"!==typeof r||(f.height=r),"string"!==typeof c&&"number"!==typeof c||(f.borderRadius=c),s&&(f.borderRadius="50%"),"undefined"!==typeof t&&(f["--base-color"]=t),"undefined"!==typeof n&&(f["--highlight-color"]=n),f}(x)),g="react-loading-skeleton";f&&(g+=" ".concat(f));for(var v=null!==(t=x.inline)&&void 0!==t&&t,C=[],N=0;N<l;N++){var y=c.createElement("span",{className:g,style:w,key:N},"\u200c");v?C.push(y):C.push(c.createElement(c.Fragment,{key:N},y,c.createElement("br",null)))}return c.createElement("span",{className:d,"data-testid":j,"aria-live":"polite","aria-busy":null===(n=x.enableAnimation)||void 0===n||n},u?C.map((function(e,t){return c.createElement(u,{key:t},e)})):C)}},116:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var o=n(0),r=n.n(o),c=n(2),s=n(12),a=n(13),i=n(6),l=n(30),u=n(23),f=n(59),d=n(16),j=n(32),p=n(31),h=n(108),b=(n(107),n(40)),m=n(42),O=n.n(m),x=(n(60),n(54)),w=n.n(x),g=n(7);function v(e){var t=e.setActiveUploadProfileIcon,n=e.user,o=Object(i.useState)(null),a=Object(s.a)(o,2),u=a[0],f=a[1],d=Object(i.useState)(!1),j=Object(s.a)(d,2),p=j[0],h=j[1];return console.log(n),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(O.a,{onOutsideClick:function(){t(!1)},children:[Object(g.jsxs)("form",{onSubmit:function(){var e=Object(c.a)(r.a.mark((function e(o){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),h(!0),e.next=4,Object(l.n)(u,n.docId);case 4:h(!1),t(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),className:"upload-form",children:[Object(g.jsx)("p",{className:"upload_p",children:"Upload new icon"}),Object(g.jsxs)("div",{className:"form-content-container",children:[Object(g.jsx)("label",{for:"image_uploads",className:"image-upload-label",children:"Choose icon to upload (PNG, JPG)"}),Object(g.jsx)("input",{onChange:function(e){return f(e.target.files[0])},id:"image_uploads",accept:"image/png, image/jpeg",className:"image-upload",type:"file",required:!0}),u?Object(g.jsx)("img",{className:"preview-img",src:URL.createObjectURL(u)}):null,p?Object(g.jsx)(w.a,{type:"TailSpin",color:"#0095F6",className:"submit-post loading-circle",height:40,width:40}):Object(g.jsx)("input",{disabled:!u,className:"submit-post ".concat(u?"":"disabled"),type:"submit",value:"Change profile icon"})]})]})," "]}),Object(g.jsx)("div",{className:"upload-shadow"}),Object(g.jsx)("div",{className:"close-upload",children:Object(g.jsxs)("svg",{"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",class:"_8-yf5 ",color:"#ffffff",fill:"#ffffff",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:[Object(g.jsx)("polyline",{fill:"none",points:"20.643 3.357 12 12 3.353 20.647",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3"}),Object(g.jsx)("line",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",x1:"20.649",x2:"3.354",y1:"20.649",y2:"3.354"})]})})]})}function C(e){var t=e.profile,n=e.photosCount,o=e.followerCount,a=e.setFollowerCount,u=e.followingCount,f=Object(i.useContext)(p.a),d=(f.firebase,f.db,f.auth,Object(b.a)().user),m=Object(i.useContext)(j.a).activeUsername,O=Object(i.useState)(!1),x=Object(s.a)(O,2),w=x[0],C=x[1],N=Object(i.useState)(!0),y=Object(s.a)(N,2),k=y[0],I=y[1],S=Object(i.useState)(!1),E=Object(s.a)(S,2),L=E[0],M=E[1],P=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C((function(e){return!e})),a({followerCount:w?o-1:o+1}),e.next=4,Object(l.j)(w,d.docId,t.docId,t.userId,d.userId);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){I(t.username==m);var e=function(){var e=Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.i)(m,t.userId);case 2:n=e.sent,C(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m&&t.userId&&e(),function(){}}),[d.username,t.userId]),t?Object(g.jsxs)("div",{className:"profile-header-container",children:[t.profileIconSrc?Object(g.jsx)("img",{className:"profile-header-icon profile-profileIcon",src:t.profileIconSrc}):Object(g.jsxs)("svg",{className:"profile-header-icon",width:"150",height:"150",viewBox:"0 0 24 24",fill:"none",children:[Object(g.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"}),Object(g.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"})]}),L&&Object(g.jsx)(v,{setActiveUploadProfileIcon:M,user:d}),Object(g.jsxs)("div",{className:"header-info",children:[Object(g.jsxs)("div",{className:"row",children:[t.username?Object(g.jsx)("div",{className:"header-username",children:t.username}):Object(g.jsx)(h.a,{count:1,width:80,height:30}),t.username?k?Object(g.jsx)("button",{onClick:function(){return M(!L)},className:"profile-follow",children:"Change profile icon"}):Object(g.jsx)("button",{onClick:P,className:" ".concat(w?"profile-follow profile-unfollow":"profile-follow"," "),children:w?"Unfollow":"Follow"}):Object(g.jsx)(h.a,{className:"profile-skeleton",count:1,width:90,height:30})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsxs)("div",{className:"header-photos",children:[n," ",1==n?"post":"posts"]}),Object(g.jsxs)("div",{className:"header-folowers info",children:[o," ",1==o?"follower":"followers"]}),Object(g.jsxs)("div",{className:"header-following info",children:[u," ",1==u?"following":"followings"]})]}),Object(g.jsx)("div",{className:"profile-header-fullname",children:t.fullName?t.fullName:Object(g.jsx)(h.a,{count:1,width:100})})]})]}):Object(g.jsx)(h.a,{count:1,width:635,height:120})}n(11);function N(e){var t=e.photos;return Object(g.jsx)("div",{className:"profile-photos-container",children:t?t.length>0?t.map((function(e){return Object(g.jsxs)("div",{className:"profile-photo-container",children:[Object(g.jsx)("img",{src:e.imageSrc,className:"profile-post-img"}),Object(g.jsxs)("p",{className:"profile-photo-detail",children:[Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"profile-actions",width:"24",height:"24",stroke:"currentColor",tabIndex:0,children:Object(g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.likes.length,Object(g.jsx)("svg",{"aria-label":"",className:"profile-actions",role:"img",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(g.jsx)("path",{d:"M20.656 17.008a9.993 9.993 0 10-3.59 3.615L22 22z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"2"})}),e.comments.length]})]},e.docId)})):Object(g.jsx)("div",{className:"no-photos",children:"No posts yet"}):Object(g.jsx)(h.a,{count:1,width:935,height:400})})}function y(e){var t=e.user,n=Object(i.useReducer)((function(e,t){return Object(d.a)(Object(d.a)({},e),t)}),{profile:{},photosCollection:[],followerCount:0,followingCount:0}),o=Object(s.a)(n,2),a=o[0],u=a.profile,f=a.photosCollection,j=a.followerCount,p=a.followingCount,h=o[1];return Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.h)(t.username);case 2:n=e.sent,h({profile:t,photosCollection:n,followerCount:t.followers.length,followingCount:t.following.length});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[t]),Object(g.jsxs)("div",{className:"profile-content-container",children:[Object(g.jsx)(C,{profile:u,photosCount:f.length,followerCount:j,setFollowerCount:h,followingCount:p}),Object(g.jsx)(N,{photos:f})]})}n(116);function k(e){var t=e.setInHome,n=e.setInProfile,o=e.inProfile,d=Object(a.h)(),j=Object(a.i)().username,p=Object(i.useState)(!1),h=Object(s.a)(p,2),b=h[0],m=h[1],O=Object(i.useState)(null),x=Object(s.a)(O,2),w=x[0],v=x[1];return Object(i.useEffect)((function(){return n(!0),t(!1),function(){n(!1),t(!1)}}),[]),Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.g)(j);case 2:(t=e.sent)?(v(t),document.title="".concat(t.fullName,"(@").concat(t.username,")"),m(!0)):(m(!1),d(u.c));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[j,d]),b?Object(g.jsxs)("div",{className:"profile-container",children:[Object(g.jsx)(f.a,{inProfile:o}),Object(g.jsx)(y,{user:w})]}):null}}}]);
//# sourceMappingURL=4.d2e3c63a.chunk.js.map