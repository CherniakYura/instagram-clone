(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{18:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return i}));var r=n(52),c=n(26);n.d(t,"e",(function(){return c.d})),n.d(t,"b",(function(){return c.a}));var a=n(11),s=r.a({apiKey:"AIzaSyCS17XJapSFDZzaPAVKPWM_uZqZrfD8GmA",authDomain:"instagram-clone-4a846.firebaseapp.com",projectId:"instagram-clone-4a846",storageBucket:"instagram-clone-4a846.appspot.com",messagingSenderId:"233007670425",appId:"1:233007670425:web:7a9880b861c364b3e94408"}),u=Object(a.g)(),i=Object(c.b)()},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u}));var r="/",c="/login",a="/signup",s="/p/:username",u="/not-found"},28:function(e,t,n){"use strict";var r=n(9),c=Object(r.createContext)(null);t.a=c},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return j})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"k",(function(){return x})),n.d(t,"d",(function(){return w})),n.d(t,"h",(function(){return g})),n.d(t,"a",(function(){return y})),n.d(t,"i",(function(){return N})),n.d(t,"j",(function(){return M})),n.d(t,"c",(function(){return z}));var r=n(15),c=n(0),a=n.n(c),s=n(2),u=n(18),i=n(11);function o(e){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.i)(Object(i.d)(u.c,"users"),Object(i.k)("username","==",t)),e.next=3,Object(i.f)(n);case 3:return r=e.sent,e.abrupt("return",r.docs.length);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return b.apply(this,arguments)}function b(){return(b=Object(s.a)(a.a.mark((function e(t){var n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.i)(Object(i.d)(u.c,"users"),Object(i.k)("username","==",t)),e.next=3,Object(i.f)(n);case 3:return c=e.sent,s=c.docs.map((function(e){return Object(r.a)(Object(r.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",s[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=Object(s.a)(a.a.mark((function e(t){var n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.i)(Object(i.d)(u.c,"users"),Object(i.k)("userId","==",t)),e.next=3,Object(i.f)(n);case 3:return c=e.sent,s=c.docs.map((function(e){return Object(r.a)(Object(r.a)({},e.data()),{},{docId:e.id})})),e.abrupt("return",s[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return O.apply(this,arguments)}function O(){return(O=Object(s.a)(a.a.mark((function e(t,n){var c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(i.i)(Object(i.d)(u.c,"users"),Object(i.h)(5)),e.next=3,Object(i.f)(c);case 3:return s=e.sent,e.abrupt("return",s.docs.map((function(e){return Object(r.a)(Object(r.a)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.userId!=t&&!n.includes(e.userId)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,n){return m.apply(this,arguments)}function m(){return(m=Object(s.a)(a.a.mark((function e(t,n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(i.e)(u.c,"users",t),!r){e.next=6;break}return e.next=4,Object(i.j)(c,{following:Object(i.b)(n)});case 4:e.next=8;break;case 6:return e.next=8,Object(i.j)(c,{following:Object(i.c)(n)});case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,n){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(a.a.mark((function e(t,n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(i.e)(u.c,"users",t),!r){e.next=6;break}return e.next=4,Object(i.j)(c,{followers:Object(i.b)(n)});case 4:e.next=8;break;case 6:return e.next=8,Object(i.j)(c,{followers:Object(i.c)(n)});case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return C.apply(this,arguments)}function C(){return C=Object(s.a)(a.a.mark((function e(t,n){var c,o,l,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(i.i)(Object(i.d)(u.c,"photos"),Object(i.k)("userId","in",n)),e.next=3,Object(i.f)(c);case 3:return o=e.sent,l=o.docs.map((function(e){return Object(r.a)(Object(r.a)({},e.data()),{},{docId:e.id})})),e.next=7,Promise.all(l.map(function(){var e=Object(s.a)(a.a.mark((function e(n){var c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!1,n.likes.includes(t)&&(c=!0),e.next=4,d(n.userId);case 4:return s=e.sent,u=s.username,e.abrupt("return",Object(r.a)(Object(r.a)({username:u},n),{},{userLikedPhoto:c}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return j=e.sent,e.abrupt("return",j);case 9:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function g(e){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(a.a.mark((function e(t){var n,c,s,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t);case 2:return n=e.sent,c=n.userId,s=Object(i.i)(Object(i.d)(u.c,"photos"),Object(i.k)("userId","==",c)),e.next=7,Object(i.f)(s);case 7:return o=e.sent,l=o.docs.map((function(e){return Object(r.a)(Object(r.a)({},e.data()),{},{docId:e.id})})).sort((function(e,t){return t.dateCreated-e.dateCreated})),e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n){return I.apply(this,arguments)}function I(){return(I=Object(s.a)(a.a.mark((function e(t,n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(i.e)(u.c,"photos",t),e.next=3,Object(i.j)(c,{comments:Object(i.c)({displayName:r,comment:n})});case 3:return e.abrupt("return");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(i.i)(Object(i.d)(u.c,"users"),Object(i.k)("username","==",t),Object(i.k)("following","array-contains",n)),e.next=3,Object(i.f)(r);case 3:return c=e.sent,e.abrupt("return",!!c.docs[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,n,r,c){return P.apply(this,arguments)}function P(){return(P=Object(s.a)(a.a.mark((function e(t,n,r,c,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(n,c,t);case 2:return e.next=4,x(r,s,t);case 4:return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return H.apply(this,arguments)}function H(){return(H=Object(s.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.i)(Object(i.d)(u.c,"users"),Object(i.h)(6)),e.next=3,Object(i.f)(n);case 3:return c=e.sent,e.abrupt("return",c.docs.map((function(e){return Object(r.a)(Object(r.a)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.username!=t})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},33:function(e,t,n){"use strict";var r=n(9),c=Object(r.createContext)(null);t.a=c},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(0),c=n.n(r),a=n(2),s=n(12),u=n(9),i=n(28),o=n(33),l=(n(61),n(22)),j=n(24),b=n(26),d=n(51),f=n(32),p=n(53),O=n.n(p),h=n(10);function m(e){var t=e.users,n=e.setActiveSearchDropdown;return Object(h.jsx)("div",{className:"search-dropdown-container",children:Object(h.jsx)(O.a,{onOutsideClick:function(){n(!1)},children:t.length>0?t.map((function(e){return Object(h.jsx)("div",{className:"search-user-container",onClick:function(){return n(!1)},children:Object(h.jsxs)(j.b,{to:"/p/".concat(e.item.username),className:"profile-link",children:[Object(h.jsxs)("svg",{className:"search-profile-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[Object(h.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"}),Object(h.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"})]}),e.item.username]})})})):Object(h.jsx)("div",{className:"not-found",children:"No matches"})})})}function x(e){var t=e.inHome,n=(e.inProfile,Object(u.useState)("")),r=Object(s.a)(n,2),p=r[0],O=r[1],x=Object(u.useContext)(o.a),v=x.user,w=x.activeUsername,C=Object(u.useState)(!1),g=Object(s.a)(C,2),k=g[0],y=g[1],I=Object(u.useState)([]),N=Object(s.a)(I,2),S=N[0],M=N[1],P=new d.a(S,{keys:["username","fullName"]});Object(u.useEffect)((function(){function e(){return(e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(w).then((function(e){return M(e)}));case 2:console.log("all",S);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}w&&function(){e.apply(this,arguments)}()}),[w]);var z=Object(u.useContext)(i.a),H=(z.firebase,z.db,z.auth);z.signInWithEmailAndPassword,z.createUserWithEmailAndPassword;return Object(h.jsx)("div",{className:"navbar-container",children:Object(h.jsxs)("div",{className:"nav-content-container",children:[Object(h.jsx)(j.b,{to:l.a,children:Object(h.jsx)("img",{alt:"instagram logo",className:"logo",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png"})}),Object(h.jsxs)("div",{className:"search-container",children:[Object(h.jsx)("input",{onChange:function(e){var t=e.target;O(t.value)},value:p,onFocus:function(){return y(!0)},className:"nav-search ".concat(p?null:"search-img"),placeholder:p?"   ".concat(p):"   Search"}),k?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m,{users:P.search(p),setActiveSearchDropdown:y})," ",Object(h.jsx)("div",{className:"arrow"})]}):null]}),Object(h.jsxs)("div",{className:"nav-icons",children:[Object(h.jsx)(j.b,{to:l.a,children:t?Object(h.jsx)("svg",{"aria-label":"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",className:"icon home",color:"#262626",fill:"#262626",height:"22",role:"img",viewBox:"0 0 48 48",width:"22",children:Object(h.jsx)("path",{d:"M45.5 48H30.1c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2.1-4.6-4.6-4.6s-4.6 2.1-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.6-.6 2.1 0l21.5 21.5c.3.3.4.7.4 1.1v23.5c.1.8-.6 1.5-1.4 1.5z"})}):Object(h.jsx)("svg",{"aria-label":"home ",className:"home icon",color:"#262626",fill:"#262626",height:"22",role:"img",viewBox:"0 0 48 48",width:"22",children:Object(h.jsx)("path",{d:"M45.3 48H30c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2-4.6-4.6-4.6s-4.6 2-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.5-.6 2.1 0l21.5 21.5c.4.4.6 1.1.3 1.6 0 .1-.1.1-.1.2v22.8c.1.8-.6 1.5-1.4 1.5zm-13.8-3h12.3V23.4L24 3.6l-20 20V45h12.3V34.2c0-4.3 3.3-7.6 7.6-7.6s7.6 3.3 7.6 7.6V45z"})})}),Object(h.jsxs)("svg",{"aria-label":"\u041d\u043e\u0432\u0430\u044f \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f",className:"icon",color:"#262626",fill:"#262626",height:"22",role:"img",viewBox:"0 0 48 48",width:"22",children:[Object(h.jsx)("path",{d:"M31.8 48H16.2c-6.6 0-9.6-1.6-12.1-4C1.6 41.4 0 38.4 0 31.8V16.2C0 9.6 1.6 6.6 4 4.1 6.6 1.6 9.6 0 16.2 0h15.6c6.6 0 9.6 1.6 12.1 4C46.4 6.6 48 9.6 48 16.2v15.6c0 6.6-1.6 9.6-4 12.1-2.6 2.5-5.6 4.1-12.2 4.1zM16.2 3C10 3 7.8 4.6 6.1 6.2 4.6 7.8 3 10 3 16.2v15.6c0 6.2 1.6 8.4 3.2 10.1 1.6 1.6 3.8 3.1 10 3.1h15.6c6.2 0 8.4-1.6 10.1-3.2 1.6-1.6 3.1-3.8 3.1-10V16.2c0-6.2-1.6-8.4-3.2-10.1C40.2 4.6 38 3 31.8 3H16.2z"}),Object(h.jsx)("path",{d:"M36.3 25.5H11.7c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h24.6c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5z"}),Object(h.jsx)("path",{d:"M24 37.8c-.8 0-1.5-.7-1.5-1.5V11.7c0-.8.7-1.5 1.5-1.5s1.5.7 1.51.5v24.6c0 .8-.7 1.5-1.5 1.5z"})]}),v?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.b,{to:"/p/".concat(w),children:Object(h.jsxs)("svg",{className:"icon profile",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[Object(h.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"}),Object(h.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"})]})}),Object(h.jsx)(j.b,{to:l.b,children:Object(h.jsx)("svg",{onClick:function(){Object(b.e)(H)},xmlns:"http://www.w3.org/2000/svg",class:"icon ",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(h.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(j.b,{to:l.b,children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon login",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(h.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})})})})]})]})})}},60:function(e,t,n){},61:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var r=n(9),c=n.n(r),a=n(50),s=n.n(a),u=n(0),i=n.n(u),o=n(2),l=n(12),j=(n(60),n(24)),b=n(13),d=(n(54),n(22)),f=n(28),p=n(26);var O=n(33),h=n(32),m=(n(15),n(41)),x=n(10),v=["user","children"];function w(e){var t=e.user;e.children,Object(m.a)(e,v);return t?Object(x.jsx)(b.b,{}):Object(x.jsx)(b.a,{to:d.b})}var C=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,97))})),g=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,98))})),k=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,99))})),y=Object(r.lazy)((function(){return Promise.all([n.e(7),n.e(3)]).then(n.bind(null,101))})),I=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,102))}));var N=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),s=Object(l.a)(a,2),u=s[0],m=s[1],v=Object(r.useState)(""),N=Object(l.a)(v,2),S=N[0],M=N[1],P=function(){var e=Object(r.useState)(JSON.parse(localStorage.getItem("authUser"))),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(f.a).auth;return Object(r.useEffect)((function(){var e=Object(p.c)(a,(function(e){e?(localStorage.setItem("authUser",JSON.stringify(e)),c(e)):(localStorage.removeItem("authUser"),c(null))}));return function(){e()}}),[a]),{user:n}}(),z=P.user;function H(){return(H=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.f)(z.uid);case 2:return t=e.sent,e.abrupt("return",t.username);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return z&&function(){return H.apply(this,arguments)}().then((function(e){return M(e)})),Object(x.jsx)(j.a,{basename:"/instagram-clone",children:Object(x.jsx)(O.a.Provider,{value:{user:z,activeUsername:S},children:Object(x.jsx)(r.Suspense,{fallback:Object(x.jsx)("p",{children:"Loading..."}),children:Object(x.jsx)("div",{className:"pagesContainer",children:Object(x.jsxs)(b.e,{children:[Object(x.jsx)(b.c,{exact:!0,path:d.b,element:Object(x.jsx)(C,{})}),Object(x.jsx)(b.c,{exact:!0,path:d.e,element:Object(x.jsx)(g,{})}),Object(x.jsxs)(b.c,{exact:!0,path:d.a,element:Object(x.jsx)(w,{user:z}),children:[Object(x.jsx)(b.c,{exact:!0,path:d.a,element:Object(x.jsx)(y,{inHome:n,setInHome:c,setInProfile:m})}),Object(x.jsx)(b.c,{exact:!0,path:d.d,element:Object(x.jsx)(I,{inProfile:u,setInHome:c,setInProfile:m})})]}),Object(x.jsx)(b.c,{path:":a",element:Object(x.jsx)(k,{})})]})})})})})},S=n(18);s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(f.a.Provider,{value:{firebase:S.d,db:S.c,auth:S.a,signInWithEmailAndPassword:S.e,createUserWithEmailAndPassword:S.b},children:Object(x.jsx)(N,{})})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.1863821a.chunk.js.map