{"version":3,"sources":["lib/firebase.js","constants/routes.js","services/firebase.js","context/firebase.js","context/user.js","components/searchDropdown.js","components/uploadPost.js","components/NavBar.js","helpers/protected.route.js","App.js","hooks/use-auth-listener.js","index.js"],"names":["firebase","Firebase","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","auth","getAuth","DASHBOARD","LOGIN","SIGN_UP","PROFILE","NOT_FOUND","doesUsernameExist","username","a","q","query","collection","where","getDocs","querySnapshot","docs","length","getUserByUsername","user","map","item","data","docId","id","getUserByUserId","userId","getSuggestedProfiles","following","limit","filter","profile","includes","updateLoggedUserFollowing","loggedUserDocId","profileId","followed","loggedUserRef","doc","updateDoc","arrayRemove","arrayUnion","updateFollowedUserFollowers","spDocId","FollowedUserRef","followers","getPhotos","userFollowedPhotos","photo","Promise","all","userLikedPhoto","likes","photosWithUserDetails","getUserPhotosByUsername","photos","sort","b","dateCreated","addComment","comment","displayName","photoRef","comments","isUserFollowingProfile","profileUserId","toggleFollow","isFollowingProfile","activeUserDocId","profileDocId","activeUserId","getAllProfiles","uploadPost","file","caption","addDoc","Date","now","imageSrc","filePath","currentUser","uid","name","newImageRef","ref","getStorage","uploadBytesResumable","fileSnapshot","getDownloadURL","publicImageUrl","storageUri","metadata","fullPath","console","error","FirebaseContext","createContext","UserContext","SearchDropdown","users","setActiveSearchDropdown","className","onOutsideClick","onClick","to","width","height","viewBox","fill","d","UploadPost","setActivePostUpload","useState","fileToUpload","setFileToUpload","setCaption","onSubmit","e","preventDefault","for","onChange","target","files","accept","type","required","src","URL","createObjectURL","placeholder","value","disabled","class","color","role","points","stroke","x1","x2","y1","y2","NavBar","inHome","inProfile","searchValue","setSearchValue","useContext","activeUsername","activeSearchDropdown","allUsers","setAllUsers","activePostUpload","fuse","Fuse","keys","useEffect","then","result","getAllUsers","signInWithEmailAndPassword","createUserWithEmailAndPassword","ROUTES","alt","onFocus","search","signOut","xmlns","ProtectedRoute","children","Login","lazy","SignUp","NotFound","Dashboard","Profile","App","setInHome","setInProfile","setUsername","JSON","parse","localStorage","getItem","setUser","listener","onAuthStateChanged","authUser","setItem","stringify","removeItem","useAuthListener","myuser","getUsername","basename","Provider","fallback","exact","path","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f7210cef.chunk.js","sourcesContent":["import * as Firebase from \"firebase/app\";\r\nimport {\r\n    getAuth,\r\n    signInWithEmailAndPassword,\r\n    createUserWithEmailAndPassword,\r\n} from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCS17XJapSFDZzaPAVKPWM_uZqZrfD8GmA\",\r\n    authDomain: \"instagram-clone-4a846.firebaseapp.com\",\r\n    projectId: \"instagram-clone-4a846\",\r\n    storageBucket: \"instagram-clone-4a846.appspot.com\",\r\n    messagingSenderId: \"233007670425\",\r\n    appId: \"1:233007670425:web:7a9880b861c364b3e94408\",\r\n};\r\n\r\nconst firebase =  Firebase.initializeApp(firebaseConfig);\r\n\r\n//console.log(firebase);\r\n\r\nconst  db  = getFirestore();\r\nconst auth = getAuth();\r\n//seedDatabase(FieldValue);\r\n\r\nexport {\r\n    firebase,\r\n    db,\r\n    auth,\r\n    signInWithEmailAndPassword,\r\n    createUserWithEmailAndPassword,\r\n};","export const DASHBOARD = \"/\";\r\nexport const LOGIN = \"/login\";\r\nexport const SIGN_UP = \"/signup\";\r\nexport const PROFILE = \"/p/:username\";\r\nexport const NOT_FOUND = \"/not-found\";\r\n","import {\r\n    firebase,\r\n    db,\r\n    auth,\r\n    signInWithEmailAndPassword,\r\n} from \"../lib/firebase\";\r\nimport {\r\n    getAuth,\r\n    onAuthStateChanged,\r\n    GoogleAuthProvider,\r\n    signInWithPopup,\r\n    signOut,\r\n} from \"firebase/auth\";\r\nimport {\r\n    getFirestore,\r\n    collection,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    addDoc,\r\n    limit,\r\n    updateDoc,\r\n    arrayUnion,\r\n    arrayRemove,\r\n    doc,\r\n} from \"firebase/firestore\";\r\nimport {\r\n    getStorage,\r\n    ref,\r\n    uploadBytesResumable,\r\n    getDownloadURL,\r\n} from \"firebase/storage\";\r\n\r\nexport async function doesUsernameExist(username) {\r\n    const q = query(collection(db, \"users\"), where(\"username\", \"==\", username));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    return querySnapshot.docs.length;\r\n}\r\n\r\nexport async function getUserByUsername(username) {\r\n    const q = query(collection(db, \"users\"), where(\"username\", \"==\", username));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const user = querySnapshot.docs.map((item) => ({\r\n        ...item.data(),\r\n        docId: item.id,\r\n    }));\r\n\r\n    return user[0];\r\n}\r\n\r\nexport async function getUserByUserId(userId) {\r\n    const q = query(collection(db, \"users\"), where(\"userId\", \"==\", userId));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const user = querySnapshot.docs.map((item) => ({\r\n        ...item.data(),\r\n        docId: item.id,\r\n    }));\r\n\r\n    return user[0];\r\n}\r\n\r\nexport async function getSuggestedProfiles(userId, following) {\r\n    // const querySnapshot = await getDocs(collection(db, \"users\", limit(5)));\r\n    const q = query(collection(db, \"users\"), limit(5));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    // console.log(querySnapshot.docs[4].data());\r\n    return querySnapshot.docs\r\n        .map((user) => ({ ...user.data(), docId: user.id }))\r\n        .filter(\r\n            (profile) =>\r\n                profile.userId != userId && !following.includes(profile.userId)\r\n        );\r\n}\r\n\r\nexport async function updateLoggedUserFollowing(\r\n    loggedUserDocId,\r\n    profileId,\r\n    followed\r\n) {\r\n    const loggedUserRef = doc(db, \"users\", loggedUserDocId);\r\n\r\n    followed\r\n        ? await updateDoc(loggedUserRef, {\r\n              following: arrayRemove(profileId),\r\n          })\r\n        : await updateDoc(loggedUserRef, {\r\n              following: arrayUnion(profileId),\r\n          });\r\n\r\n    return;\r\n}\r\n\r\nexport async function updateFollowedUserFollowers(spDocId, userId, followed) {\r\n    const FollowedUserRef = doc(db, \"users\", spDocId);\r\n\r\n    followed\r\n        ? await updateDoc(FollowedUserRef, {\r\n              followers: arrayRemove(userId),\r\n          })\r\n        : await updateDoc(FollowedUserRef, {\r\n              followers: arrayUnion(userId),\r\n          });\r\n\r\n    return;\r\n}\r\n\r\nexport async function getPhotos(userId, following) {\r\n    const q = query(collection(db, \"photos\"), where(\"userId\", \"in\", following));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const userFollowedPhotos = querySnapshot.docs.map((photo) => ({\r\n        ...photo.data(),\r\n        docId: photo.id,\r\n    }));\r\n\r\n    const photosWithUserDetails = await Promise.all(\r\n        userFollowedPhotos.map(async (photo) => {\r\n            let userLikedPhoto = false;\r\n            if (photo.likes.includes(userId)) {\r\n                userLikedPhoto = true;\r\n            }\r\n\r\n            const { username } = await getUserByUserId(photo.userId);\r\n\r\n            return { username, ...photo, userLikedPhoto };\r\n        })\r\n    );\r\n\r\n    return photosWithUserDetails;\r\n}\r\n\r\nexport async function getUserPhotosByUsername(username) {\r\n    const { userId } = await getUserByUsername(username);\r\n    const q = query(collection(db, \"photos\"), where(\"userId\", \"==\", userId));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const photos = querySnapshot.docs\r\n        .map((item) => ({\r\n            ...item.data(),\r\n            docId: item.id,\r\n        }))\r\n        .sort((a, b) => b.dateCreated - a.dateCreated);\r\n\r\n    return photos;\r\n}\r\n\r\nexport async function addComment(docId, comment, displayName) {\r\n    const photoRef = doc(db, \"photos\", docId);\r\n\r\n    await updateDoc(photoRef, {\r\n        comments: arrayUnion({ displayName, comment }),\r\n    });\r\n\r\n    return;\r\n}\r\n\r\nexport async function isUserFollowingProfile(username, profileUserId) {\r\n    const q = query(\r\n        collection(db, \"users\"),\r\n        where(\"username\", \"==\", username),\r\n        where(\"following\", \"array-contains\", profileUserId)\r\n    );\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    //console.log(!!querySnapshot.docs[0]);\r\n    return !!querySnapshot.docs[0];\r\n}\r\n\r\nexport async function toggleFollow(\r\n    isFollowingProfile,\r\n    activeUserDocId,\r\n    profileDocId,\r\n    profileUserId,\r\n    activeUserId\r\n) {\r\n    await updateLoggedUserFollowing(\r\n        activeUserDocId,\r\n        profileUserId,\r\n        isFollowingProfile\r\n    );\r\n    await updateFollowedUserFollowers(\r\n        profileDocId,\r\n        activeUserId,\r\n        isFollowingProfile\r\n    );\r\n\r\n    return;\r\n}\r\n\r\nexport async function getAllProfiles(username) {\r\n    // const querySnapshot = await getDocs(collection(db, \"users\", limit(5)));\r\n    const q = query(collection(db, \"users\"), limit(6));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    // console.log(querySnapshot.docs[4].data());\r\n    return querySnapshot.docs\r\n        .map((user) => ({ ...user.data(), docId: user.id }))\r\n        .filter((profile) => profile.username != username);\r\n}\r\n\r\nexport async function uploadPost(file, caption, userId) {\r\n    try {\r\n        // 1 - We add a message with a loading icon that will get updated with the shared image.\r\n        const photoRef = await addDoc(collection(getFirestore(), \"photos\"), {\r\n            caption: caption,\r\n            comments: [],\r\n            dateCreated: Date.now(),\r\n            imageSrc: \"\",\r\n            likes: [],\r\n          //  photoId : `${userId}${Date.now()}`,\r\n            userId: userId,\r\n            \r\n        });\r\n\r\n        // 2 - Upload the image to Cloud Storage.\r\n        const filePath = `${getAuth().currentUser.uid}/${photoRef.id}/${\r\n            file.name\r\n        }`;\r\n        const newImageRef = ref(getStorage(), filePath);\r\n        const fileSnapshot = await uploadBytesResumable(newImageRef, file);\r\n\r\n        // 3 - Generate a public URL for the file.\r\n        const publicImageUrl = await getDownloadURL(newImageRef);\r\n\r\n        // 4 - Update the chat message placeholder with the image's URL.\r\n        await updateDoc(photoRef, {\r\n            imageSrc: publicImageUrl,\r\n            storageUri: fileSnapshot.metadata.fullPath,\r\n        });\r\n    } catch (error) {\r\n        console.error(\r\n            \"There was an error uploading a file to Cloud Storage:\",\r\n            error\r\n        );\r\n    }\r\n}\r\n","import { createContext } from \"react\";\r\n\r\nconst FirebaseContext = createContext(null);\r\nexport default FirebaseContext;\r\n","import { createContext } from \"react\";\r\n\r\nconst UserContext = createContext(null);\r\nexport default UserContext;","import { Link } from \"react-router-dom\";\r\nimport OutsideClickHandler from \"react-outside-click-handler\";\r\n\r\nexport default function SearchDropdown({ users ,setActiveSearchDropdown}) {\r\n    return (\r\n        <div className=\"search-dropdown-container\">\r\n            <OutsideClickHandler\r\n                onOutsideClick={() => {\r\n                    setActiveSearchDropdown(false);\r\n                }}\r\n            >\r\n                {users.length > 0 ? (\r\n                    users.map((user) => (\r\n                        <div\r\n                            className=\"search-user-container\"\r\n                            onClick={() => setActiveSearchDropdown(false)}\r\n                        >\r\n                            <Link\r\n                                to={`/p/${user.item.username}`}\r\n                                className=\"profile-link\"\r\n                            >\r\n                                <svg\r\n                                    className=\"search-profile-icon\"\r\n                                    width=\"24\"\r\n                                    height=\"24\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"none\"\r\n                                >\r\n                                    <path\r\n                                        fill-rule=\"evenodd\"\r\n                                        clip-rule=\"evenodd\"\r\n                                        d=\"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z\"\r\n                                        fill=\"currentColor\"\r\n                                    />\r\n                                    <path\r\n                                        fill-rule=\"evenodd\"\r\n                                        clip-rule=\"evenodd\"\r\n                                        d=\"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z\"\r\n                                        fill=\"currentColor\"\r\n                                    />\r\n                                </svg>\r\n                                {user.item.username}\r\n                            </Link>\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    <div className=\"not-found\">No matches</div>\r\n                )}\r\n               \r\n            </OutsideClickHandler>\r\n        </div>\r\n    );\r\n}\r\n","import { useState } from \"react\";\r\nimport { uploadPost } from \"../services/firebase\";\r\nimport OutsideClickHandler from \"react-outside-click-handler/build/OutsideClickHandler\";\r\n\r\nexport default function UploadPost({ setActivePostUpload, user }) {\r\n    const [fileToUpload, setFileToUpload] = useState(null);\r\n    const [caption, setCaption] = useState(\"\");\r\n\r\n    return (\r\n        <>\r\n            <OutsideClickHandler\r\n                onOutsideClick={() => {\r\n                    setActivePostUpload(false);\r\n                }}\r\n            >\r\n                <form\r\n                    onSubmit={async function (e) {\r\n                        e.preventDefault();\r\n                        setCaption(\"\");\r\n                        setActivePostUpload(false);\r\n                        await uploadPost(fileToUpload, caption, user.uid);\r\n                    }}\r\n                    className=\"upload-form\"\r\n                >\r\n                    <p className=\"upload_p\">Create a post</p>\r\n\r\n                    <div className=\"form-content-container\">\r\n                        <label\r\n                            for=\"image_uploads\"\r\n                            className=\"image-upload-label\"\r\n                        >\r\n                            Choose photo to upload (PNG, JPG)\r\n                        </label>\r\n                        <input\r\n                            onChange={(e) => setFileToUpload(e.target.files[0])}\r\n                            id=\"image_uploads\"\r\n                            accept=\"image/png, image/jpeg\"\r\n                            className=\"image-upload\"\r\n                            type=\"file\"\r\n                            required\r\n                        />\r\n\r\n                        {fileToUpload ? (\r\n                            <img\r\n                                className=\"preview-img\"\r\n                                src={URL.createObjectURL(fileToUpload)}\r\n                            />\r\n                        ) : null}\r\n\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"caption-upload\"\r\n                            placeholder=\"Add caption\"\r\n                            onChange={(e) => setCaption(e.target.value)}\r\n                            value={caption}\r\n                            required\r\n                        />\r\n                        <input\r\n                            disabled={!caption || !fileToUpload}\r\n                            className={`submit-post ${\r\n                                !caption || !fileToUpload ? \"disabled\" : \"\"\r\n                            }`}\r\n                            type=\"submit\"\r\n                            value=\"Upload post\"\r\n                        />\r\n                    </div>\r\n                </form>{\" \"}\r\n            </OutsideClickHandler>\r\n            <div className=\"upload-shadow\"></div>\r\n            <div className=\"close-upload\">\r\n                <svg\r\n                    aria-label=\"Закрыть\"\r\n                    class=\"_8-yf5 \"\r\n                    color=\"#ffffff\"\r\n                    fill=\"#ffffff\"\r\n                    height=\"24\"\r\n                    role=\"img\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    width=\"24\"\r\n                >\r\n                    <polyline\r\n                        fill=\"none\"\r\n                        points=\"20.643 3.357 12 12 3.353 20.647\"\r\n                        stroke=\"currentColor\"\r\n                        stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\"\r\n                        stroke-width=\"3\"\r\n                    ></polyline>\r\n                    <line\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\"\r\n                        stroke-width=\"3\"\r\n                        x1=\"20.649\"\r\n                        x2=\"3.354\"\r\n                        y1=\"20.649\"\r\n                        y2=\"3.354\"\r\n                    ></line>\r\n                </svg>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport FirebaseContext from \"../context/firebase\";\r\nimport UserContext from \"../context/user\";\r\nimport \"../styles/NavBar.css\";\r\nimport * as ROUTES from \"../constants/routes\";\r\nimport { Link, Router, useNavigate } from \"react-router-dom\";\r\nimport { signOut } from \"firebase/auth\";\r\nimport Fuse from \"fuse.js\";\r\nimport { getAllProfiles, uploadPost } from \"../services/firebase\";\r\nimport SearchDropdown from \"./searchDropdown\";\r\nimport UploadPost from \"./uploadPost\";\r\n\r\nexport default function NavBar({ inHome, inProfile }) {\r\n    const [searchValue, setSearchValue] = useState(\"\");\r\n\r\n    const { user, activeUsername } = useContext(UserContext);\r\n    const [activeSearchDropdown, setActiveSearchDropdown] = useState(false);\r\n    const [allUsers, setAllUsers] = useState([]);\r\n    const [activePostUpload, setActivePostUpload] = useState(false);\r\n    // const [fileToUpload, setFileToUpload] = useState(null);\r\n    // const [caption, setCaption] = useState(\"\");\r\n\r\n    const fuse = new Fuse(allUsers, {\r\n        keys: [\"username\", \"fullName\"],\r\n    });\r\n\r\n    useEffect(() => {\r\n        async function getAllUsers() {\r\n            await getAllProfiles(activeUsername).then((result) =>\r\n                setAllUsers(result)\r\n            );\r\n        }\r\n        if (activeUsername) {\r\n            getAllUsers();\r\n        }\r\n    }, [activeUsername]);\r\n\r\n    const {\r\n        firebase,\r\n        db,\r\n        auth,\r\n        signInWithEmailAndPassword,\r\n        createUserWithEmailAndPassword,\r\n    } = useContext(FirebaseContext);\r\n\r\n    // useEffect(() => {\r\n\r\n    // console.log('file' , fileToUpload)\r\n    // }, [fileToUpload])\r\n\r\n    return (\r\n        <div className=\"navbar-container\">\r\n            <div className=\"nav-content-container\">\r\n                <Link to={ROUTES.DASHBOARD}>\r\n                    <img\r\n                        alt=\"instagram logo\"\r\n                        className=\"logo\"\r\n                        src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\"\r\n                    />\r\n                </Link>\r\n\r\n                <div className=\"search-container\">\r\n                    <input\r\n                        onChange={({ target }) => {\r\n                            setSearchValue(target.value);\r\n                        }}\r\n                        value={searchValue}\r\n                        onFocus={() => setActiveSearchDropdown(true)}\r\n                        className={`nav-search ${\r\n                            searchValue ? null : \"search-img\"\r\n                        }`}\r\n                        placeholder={\r\n                            searchValue ? `   ${searchValue}` : \"   Search\"\r\n                        }\r\n                    />\r\n                    {activeSearchDropdown ? (\r\n                        <>\r\n                            <SearchDropdown\r\n                                users={fuse.search(searchValue)}\r\n                                setActiveSearchDropdown={\r\n                                    setActiveSearchDropdown\r\n                                }\r\n                            />{\" \"}\r\n                            <div className=\"arrow\"></div>\r\n                        </>\r\n                    ) : null}\r\n                </div>\r\n\r\n                {activePostUpload && (\r\n                    <>\r\n                        <UploadPost user={user} setActivePostUpload={setActivePostUpload} />\r\n                        {/* <div className=\"upload-form\">\r\n                            <p>Create a publication</p>\r\n                            <label\r\n                                for=\"image_uploads\"\r\n                                className=\"image-upload-label\"\r\n                            >\r\n                                Choose image to upload (PNG, JPG)\r\n                            </label>\r\n                            <input\r\n                                onChange={(e) =>\r\n                                    setFileToUpload(e.target.files[0])\r\n                                }\r\n                                name=\"image_uploads\"\r\n                                accept=\"image/png, image/jpeg\"\r\n                                className=\"image-upload\"\r\n                                type=\"file\"\r\n                                required\r\n                            />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Add caption\"\r\n                                onChange={(e) => setCaption(e.target.value)}\r\n                                value={caption}\r\n                                required\r\n                            />\r\n                            <input\r\n                                type=\"submit\"\r\n                                onClick={async function () {\r\n                                    // await uploadPost(\r\n                                    //     fileToUpload,\r\n                                    //     caption,\r\n                                    //     user.uid\r\n                                    // );\r\n                                    setActivePostUpload(false);\r\n                                    setCaption(\"\");\r\n                                }}\r\n                                value=\"Upload post\"\r\n                            />\r\n                        </div> */}\r\n                    </>\r\n                )}\r\n\r\n                <div className=\"nav-icons\">\r\n                    <Link to={ROUTES.DASHBOARD}>\r\n                        {inHome ? (\r\n                            <svg\r\n                                aria-label=\"Главная страница\"\r\n                                className=\"icon home\"\r\n                                color=\"#262626\"\r\n                                fill=\"#262626\"\r\n                                height=\"22\"\r\n                                role=\"img\"\r\n                                viewBox=\"0 0 48 48\"\r\n                                width=\"22\"\r\n                            >\r\n                                <path d=\"M45.5 48H30.1c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2.1-4.6-4.6-4.6s-4.6 2.1-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.6-.6 2.1 0l21.5 21.5c.3.3.4.7.4 1.1v23.5c.1.8-.6 1.5-1.4 1.5z\"></path>\r\n                            </svg>\r\n                        ) : (\r\n                            <svg\r\n                                aria-label=\"home \"\r\n                                className=\"home icon\"\r\n                                color=\"#262626\"\r\n                                fill=\"#262626\"\r\n                                height=\"22\"\r\n                                role=\"img\"\r\n                                viewBox=\"0 0 48 48\"\r\n                                width=\"22\"\r\n                            >\r\n                                <path d=\"M45.3 48H30c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2-4.6-4.6-4.6s-4.6 2-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.5-.6 2.1 0l21.5 21.5c.4.4.6 1.1.3 1.6 0 .1-.1.1-.1.2v22.8c.1.8-.6 1.5-1.4 1.5zm-13.8-3h12.3V23.4L24 3.6l-20 20V45h12.3V34.2c0-4.3 3.3-7.6 7.6-7.6s7.6 3.3 7.6 7.6V45z\"></path>\r\n                            </svg>\r\n                        )}\r\n                    </Link>\r\n\r\n                    <svg\r\n                        aria-label=\"Новая публикация\"\r\n                        className=\"icon\"\r\n                        color=\"#262626\"\r\n                        onClick={() => setActivePostUpload(!activePostUpload)}\r\n                        fill=\"#262626\"\r\n                        height=\"22\"\r\n                        role=\"img\"\r\n                        viewBox=\"0 0 48 48\"\r\n                        width=\"22\"\r\n                    >\r\n                        <path d=\"M31.8 48H16.2c-6.6 0-9.6-1.6-12.1-4C1.6 41.4 0 38.4 0 31.8V16.2C0 9.6 1.6 6.6 4 4.1 6.6 1.6 9.6 0 16.2 0h15.6c6.6 0 9.6 1.6 12.1 4C46.4 6.6 48 9.6 48 16.2v15.6c0 6.6-1.6 9.6-4 12.1-2.6 2.5-5.6 4.1-12.2 4.1zM16.2 3C10 3 7.8 4.6 6.1 6.2 4.6 7.8 3 10 3 16.2v15.6c0 6.2 1.6 8.4 3.2 10.1 1.6 1.6 3.8 3.1 10 3.1h15.6c6.2 0 8.4-1.6 10.1-3.2 1.6-1.6 3.1-3.8 3.1-10V16.2c0-6.2-1.6-8.4-3.2-10.1C40.2 4.6 38 3 31.8 3H16.2z\"></path>\r\n                        <path d=\"M36.3 25.5H11.7c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h24.6c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5z\"></path>\r\n                        <path d=\"M24 37.8c-.8 0-1.5-.7-1.5-1.5V11.7c0-.8.7-1.5 1.5-1.5s1.5.7 1.51.5v24.6c0 .8-.7 1.5-1.5 1.5z\"></path>\r\n                    </svg>\r\n\r\n                    {/* <svg\r\n                        aria-label=\"notify\"\r\n                        className=\"reminder icon\"\r\n                        color=\"#262626\"\r\n                        fill=\"#262626\"\r\n                        height=\"22\"\r\n                        role=\"img\"\r\n                        viewBox=\"0 0 48 48\"\r\n                        width=\"22\"\r\n                    >\r\n                        <path d=\"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path>\r\n                    </svg> */}\r\n\r\n                    {user ? (\r\n                        <>\r\n                            <Link to={`/p/${activeUsername}`}>\r\n                                <svg\r\n                                    className=\"icon profile\"\r\n                                    width=\"24\"\r\n                                    height=\"24\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"none\"\r\n                                >\r\n                                    <path\r\n                                        fill-rule=\"evenodd\"\r\n                                        clip-rule=\"evenodd\"\r\n                                        d=\"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z\"\r\n                                        fill=\"currentColor\"\r\n                                    />\r\n                                    <path\r\n                                        fill-rule=\"evenodd\"\r\n                                        clip-rule=\"evenodd\"\r\n                                        d=\"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z\"\r\n                                        fill=\"currentColor\"\r\n                                    />\r\n                                </svg>\r\n                            </Link>\r\n\r\n                            <Link to={ROUTES.LOGIN}>\r\n                                <svg\r\n                                    onClick={() => {\r\n                                        signOut(auth);\r\n                                    }}\r\n                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                    class=\"icon \"\r\n                                    fill=\"none\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    stroke=\"currentColor\"\r\n                                >\r\n                                    <path\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        stroke-width=\"2\"\r\n                                        d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\r\n                                    />\r\n                                </svg>\r\n                            </Link>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Link to={ROUTES.LOGIN}>\r\n                                <svg\r\n                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                    class=\"icon login\"\r\n                                    fill=\"none\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    stroke=\"currentColor\"\r\n                                >\r\n                                    <path\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        stroke-width=\"2\"\r\n                                        d=\"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"\r\n                                    />\r\n                                </svg>\r\n                            </Link>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import { Route, Navigate, Outlet } from \"react-router-dom\";\r\nimport * as ROUTES from \"../constants/routes\";\r\n\r\nexport default function ProtectedRoute({ user, children, ...rest }) {\r\n   // console.log(user);\r\n    return user ? <Outlet /> : <Navigate to={ROUTES.LOGIN} />;\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({ location }) => {\r\n                if (user) {\r\n                    return children;\r\n                }\r\n                if (!user) {\r\n                    return <Navigate to={ROUTES.LOGIN} />;\r\n                }\r\n\r\n                return null;\r\n            }}\r\n        />\r\n    );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\nimport \"./styles/App.css\";\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\nimport NavBar from \"./components/NavBar\";\nimport { lazy, Suspense } from \"react\";\nimport * as ROUTES from \"./constants/routes\";\nimport useAuthListener from \"./hooks/use-auth-listener\";\nimport UserContext from \"./context/user\";\nimport { getUserByUserId } from \"./services/firebase\";\n\n\nimport ProtectedRoute from \"./helpers/protected.route\";\n\nconst Login = lazy(() => import(\"./pages/login\"));\nconst SignUp = lazy(() => import(\"./pages/signup\"));\nconst NotFound = lazy(() => import(\"./pages/notfound\"));\nconst Dashboard = lazy(() => import(\"./pages/dashboard\"));\nconst Profile = lazy(() => import(\"./pages/profile\"));\n\nfunction App() {\n    const [inHome, setInHome] = useState(false);\n    const [inProfile, setInProfile] = useState(false);\n    const [username, setUsername] = useState(\"\");\n    const { user } = useAuthListener();\n\n    async function getUsername() {\n        const myuser = await getUserByUserId(user.uid);\n        return myuser.username;\n    }\n\n    if (user) {\n        getUsername().then((result) => setUsername(result));\n    }\n\n    return (\n        <Router basename=\"/instagram-clone\">\n            <UserContext.Provider value={{ user, activeUsername: username }}>\n                <Suspense fallback={<p>Loading...</p>}>\n                    <div className=\"pagesContainer\">\n                        <Routes>\n                            <Route\n                                exact\n                                path={ROUTES.LOGIN}\n                                element={<Login />}\n                            />\n\n                            <Route\n                                exact\n                                path={ROUTES.SIGN_UP}\n                                element={<SignUp />}\n                            />\n\n                            <Route\n                                exact\n                                path={ROUTES.DASHBOARD}\n                                element={<ProtectedRoute user={user} />}\n                            >\n                                <Route\n                                    exact\n                                    path={ROUTES.DASHBOARD}\n                                    element={\n                                        <Dashboard\n                                            inHome={inHome}\n                                            setInHome={setInHome}\n                                            setInProfile={setInProfile}\n                                        />\n                                    }\n                                />\n\n                                <Route\n                                    exact\n                                    path={ROUTES.PROFILE}\n                                    element={\n                                        <Profile\n                                            inProfile={inProfile}\n                                            setInHome={setInHome}\n                                            setInProfile={setInProfile}\n                                        />\n                                    }\n                                />\n                            </Route>\n\n                            <Route path=\":a\" element={<NotFound />} />\n                        </Routes>\n                    </div>\n                </Suspense>\n            </UserContext.Provider>\n        </Router>\n    );\n}\n\nexport default App;\n","import { useEffect, useState, useContext } from \"react\";\r\nimport FirebaseContext from \"../context/firebase\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\n\r\nexport default function useAuthListener() {\r\n    const [user, setUser] = useState(\r\n        JSON.parse(localStorage.getItem(\"authUser\"))\r\n    );\r\n    const {\r\n       \r\n        auth,\r\n        \r\n    } = useContext(FirebaseContext);\r\n\r\n\r\n    useEffect(() => {\r\n        \r\n       const listener = onAuthStateChanged(auth, (authUser) => {\r\n\r\n            if (authUser) {\r\n                localStorage.setItem('authUser',JSON.stringify(authUser));\r\n                setUser(authUser);\r\n            } else {\r\n                localStorage.removeItem('authUser');\r\n                setUser(null);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            listener();\r\n        }\r\n    }, [auth])\r\n    return { user };\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n//import './index.css';\nimport App from \"./App\";\nimport FirebaseContext from \"./context/firebase\";\nimport {\n    firebase,\n    db,\n    auth,\n    signInWithEmailAndPassword,\n    createUserWithEmailAndPassword,\n} from \"./lib/firebase\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <FirebaseContext.Provider\n            value={{\n                firebase,\n                db,\n                auth,\n                signInWithEmailAndPassword,\n                createUserWithEmailAndPassword,\n            }}\n        >\n            <App />\n        </FirebaseContext.Provider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}