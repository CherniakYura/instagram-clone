{"version":3,"sources":["helpers/protected.route.js","App.js","hooks/use-auth-listener.js","index.js","lib/firebase.js","constants/routes.js","services/firebase.js","context/firebase.js","context/user.js","hooks/use-user.js","components/searchDropdown.js","components/uploadPost.js","components/NavBar.js"],"names":["ProtectedRoute","user","children","to","ROUTES","Login","lazy","SignUp","NotFound","Dashboard","Profile","App","useState","inHome","setInHome","inProfile","setInProfile","username","setUsername","JSON","parse","localStorage","getItem","setUser","auth","useContext","FirebaseContext","useEffect","listener","onAuthStateChanged","authUser","setItem","stringify","removeItem","useAuthListener","a","getUserByUserId","uid","myuser","getUsername","then","result","basename","Provider","value","activeUsername","fallback","className","exact","path","element","ReactDOM","render","StrictMode","firebase","db","signInWithEmailAndPassword","createUserWithEmailAndPassword","document","getElementById","Firebase","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","getFirestore","getAuth","DASHBOARD","LOGIN","SIGN_UP","PROFILE","NOT_FOUND","doesUsernameExist","q","query","collection","where","getDocs","querySnapshot","docs","length","getUserByUsername","map","item","data","docId","id","userId","getSuggestedProfiles","following","limit","filter","profile","includes","updateLoggedUserFollowing","loggedUserDocId","profileId","followed","loggedUserRef","doc","updateDoc","arrayRemove","arrayUnion","updateFollowedUserFollowers","spDocId","FollowedUserRef","followers","getPhotos","userFollowedPhotos","photo","Promise","all","userLikedPhoto","likes","profileIconSrc","photosWithUserDetails","getUserPhotosByUsername","photos","sort","b","dateCreated","addComment","comment","displayName","photoRef","comments","isUserFollowingProfile","profileUserId","toggleFollow","isFollowingProfile","activeUserDocId","profileDocId","activeUserId","getAllProfiles","uploadPost","file","caption","addDoc","Date","now","imageSrc","filePath","currentUser","name","newImageRef","ref","getStorage","uploadBytesResumable","fileSnapshot","getDownloadURL","publicImageUrl","storageUri","metadata","fullPath","console","error","uploadProfileIcon","profileRef","createContext","UserContext","useUser","activeUser","setActiveUser","response","getUserObjByUserId","fullName","SearchDropdown","users","setActiveSearchDropdown","onOutsideClick","onClick","src","width","height","viewBox","fill","d","UploadPost","setActivePostUpload","fileToUpload","setFileToUpload","setCaption","uploading","setUploading","onSubmit","e","preventDefault","for","onChange","target","files","accept","type","required","URL","createObjectURL","placeholder","color","disabled","class","role","points","stroke","x1","x2","y1","y2","NavBar","searchValue","setSearchValue","activeSearchDropdown","allUsers","setAllUsers","activePostUpload","fuse","Fuse","keys","getAllUsers","alt","onFocus","search","signOut","xmlns"],"mappings":"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","file":"static/js/main.84b6e0a0.chunk.js","sourcesContent":["import { Route, Navigate, Outlet } from \"react-router-dom\";\r\nimport * as ROUTES from \"../constants/routes\";\r\n\r\nexport default function ProtectedRoute({ user, children, ...rest }) {\r\n   // console.log(user);\r\n    return user ? <Outlet /> : <Navigate to={ROUTES.LOGIN} />;\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({ location }) => {\r\n                if (user) {\r\n                    return children;\r\n                }\r\n                if (!user) {\r\n                    return <Navigate to={ROUTES.LOGIN} />;\r\n                }\r\n\r\n                return null;\r\n            }}\r\n        />\r\n    );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\nimport \"./styles/App.css\";\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\nimport NavBar from \"./components/NavBar\";\nimport { lazy, Suspense } from \"react\";\nimport * as ROUTES from \"./constants/routes\";\nimport useAuthListener from \"./hooks/use-auth-listener\";\nimport UserContext from \"./context/user\";\nimport { getUserByUserId } from \"./services/firebase\";\nimport useUser from \"./hooks/use-user\";\nimport ProtectedRoute from \"./helpers/protected.route\";\n\nconst Login = lazy(() => import(\"./pages/login\"));\nconst SignUp = lazy(() => import(\"./pages/signup\"));\nconst NotFound = lazy(() => import(\"./pages/notfound\"));\nconst Dashboard = lazy(() => import(\"./pages/dashboard\"));\nconst Profile = lazy(() => import(\"./pages/profile\"));\n\nfunction App() {\n    const [inHome, setInHome] = useState(false);\n    const [inProfile, setInProfile] = useState(false);\n    const [username, setUsername] = useState(\"\");\n    const { user } = useAuthListener();\n   // const { user: userDocInfo } = useUser();\n\n    async function getUsername() {\n        const myuser = await getUserByUserId(user.uid);\n        return myuser.username;\n    }\n\n    if (user) {\n        getUsername().then((result) => setUsername(result));\n    }\n\n    return (\n        <Router basename=\"/instagram-clone\">\n            <UserContext.Provider\n                value={{\n                    user,\n                    activeUsername: username,\n                    // userProfileIconSrc: userDocInfo.profileIconSrc,\n                }}\n            >\n                <Suspense fallback={<p>Loading...</p>}>\n                    <div className=\"pagesContainer\">\n                        <Routes>\n                            <Route\n                                exact\n                                path={ROUTES.LOGIN}\n                                element={<Login />}\n                            />\n\n                            <Route\n                                exact\n                                path={ROUTES.SIGN_UP}\n                                element={<SignUp />}\n                            />\n\n                            <Route\n                                exact\n                                path={ROUTES.DASHBOARD}\n                                element={<ProtectedRoute user={user} />}\n                            >\n                                <Route\n                                    exact\n                                    path={ROUTES.DASHBOARD}\n                                    element={\n                                        <Dashboard\n                                            inHome={inHome}\n                                            setInHome={setInHome}\n                                            setInProfile={setInProfile}\n                                        />\n                                    }\n                                />\n\n                                <Route\n                                    exact\n                                    path={ROUTES.PROFILE}\n                                    element={\n                                        <Profile\n                                            inProfile={inProfile}\n                                            setInHome={setInHome}\n                                            setInProfile={setInProfile}\n                                        />\n                                    }\n                                />\n                            </Route>\n\n                            <Route path=\":a\" element={<NotFound />} />\n                        </Routes>\n                    </div>\n                </Suspense>\n            </UserContext.Provider>\n        </Router>\n    );\n}\n\nexport default App;\n","import { useEffect, useState, useContext } from \"react\";\r\nimport FirebaseContext from \"../context/firebase\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\n\r\nexport default function useAuthListener() {\r\n    const [user, setUser] = useState(\r\n        JSON.parse(localStorage.getItem(\"authUser\"))\r\n    );\r\n    const {\r\n       \r\n        auth,\r\n        \r\n    } = useContext(FirebaseContext);\r\n\r\n\r\n    useEffect(() => {\r\n        \r\n       const listener = onAuthStateChanged(auth, (authUser) => {\r\n\r\n            if (authUser) {\r\n                localStorage.setItem('authUser',JSON.stringify(authUser));\r\n                setUser(authUser);\r\n            } else {\r\n                localStorage.removeItem('authUser');\r\n                setUser(null);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            listener();\r\n        }\r\n    }, [auth])\r\n    return { user };\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n//import './index.css';\nimport App from \"./App\";\nimport FirebaseContext from \"./context/firebase\";\nimport {\n    firebase,\n    db,\n    auth,\n    signInWithEmailAndPassword,\n    createUserWithEmailAndPassword,\n} from \"./lib/firebase\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <FirebaseContext.Provider\n            value={{\n                firebase,\n                db,\n                auth,\n                signInWithEmailAndPassword,\n                createUserWithEmailAndPassword,\n            }}\n        >\n            <App />\n        </FirebaseContext.Provider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n","import * as Firebase from \"firebase/app\";\r\nimport {\r\n    getAuth,\r\n    signInWithEmailAndPassword,\r\n    createUserWithEmailAndPassword,\r\n} from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCS17XJapSFDZzaPAVKPWM_uZqZrfD8GmA\",\r\n    authDomain: \"instagram-clone-4a846.firebaseapp.com\",\r\n    projectId: \"instagram-clone-4a846\",\r\n    storageBucket: \"instagram-clone-4a846.appspot.com\",\r\n    messagingSenderId: \"233007670425\",\r\n    appId: \"1:233007670425:web:7a9880b861c364b3e94408\",\r\n};\r\n\r\nconst firebase =  Firebase.initializeApp(firebaseConfig);\r\n\r\n//console.log(firebase);\r\n\r\nconst  db  = getFirestore();\r\nconst auth = getAuth();\r\n//seedDatabase(FieldValue);\r\n\r\nexport {\r\n    firebase,\r\n    db,\r\n    auth,\r\n    signInWithEmailAndPassword,\r\n    createUserWithEmailAndPassword,\r\n};","export const DASHBOARD = \"/\";\r\nexport const LOGIN = \"/login\";\r\nexport const SIGN_UP = \"/signup\";\r\nexport const PROFILE = \"/p/:username\";\r\nexport const NOT_FOUND = \"/not-found\";\r\n","import {\r\n    firebase,\r\n    db,\r\n    auth,\r\n    signInWithEmailAndPassword,\r\n} from \"../lib/firebase\";\r\nimport {\r\n    getAuth,\r\n    onAuthStateChanged,\r\n    GoogleAuthProvider,\r\n    signInWithPopup,\r\n    signOut,\r\n} from \"firebase/auth\";\r\nimport {\r\n    getFirestore,\r\n    collection,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    addDoc,\r\n    limit,\r\n    updateDoc,\r\n    arrayUnion,\r\n    arrayRemove,\r\n    doc,\r\n} from \"firebase/firestore\";\r\nimport {\r\n    getStorage,\r\n    ref,\r\n    uploadBytesResumable,\r\n    getDownloadURL,\r\n} from \"firebase/storage\";\r\n\r\nexport async function doesUsernameExist(username) {\r\n    const q = query(collection(db, \"users\"), where(\"username\", \"==\", username));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    return querySnapshot.docs.length;\r\n}\r\n\r\nexport async function getUserByUsername(username) {\r\n    const q = query(collection(db, \"users\"), where(\"username\", \"==\", username));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const user = querySnapshot.docs.map((item) => ({\r\n        ...item.data(),\r\n        docId: item.id,\r\n    }));\r\n\r\n    return user[0];\r\n}\r\n\r\nexport async function getUserByUserId(userId) {\r\n    const q = query(collection(db, \"users\"), where(\"userId\", \"==\", userId));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const user = querySnapshot.docs.map((item) => ({\r\n        ...item.data(),\r\n        docId: item.id,\r\n    }));\r\n\r\n    return user[0];\r\n}\r\n\r\nexport async function getSuggestedProfiles(userId, following) {\r\n    // const querySnapshot = await getDocs(collection(db, \"users\", limit(5)));\r\n    const q = query(collection(db, \"users\"), limit(5));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    // console.log(querySnapshot.docs[4].data());\r\n    return querySnapshot.docs\r\n        .map((user) => ({ ...user.data(), docId: user.id }))\r\n        .filter(\r\n            (profile) =>\r\n                profile.userId != userId && !following.includes(profile.userId)\r\n        );\r\n}\r\n\r\nexport async function updateLoggedUserFollowing(\r\n    loggedUserDocId,\r\n    profileId,\r\n    followed\r\n) {\r\n    const loggedUserRef = doc(db, \"users\", loggedUserDocId);\r\n\r\n    followed\r\n        ? await updateDoc(loggedUserRef, {\r\n              following: arrayRemove(profileId),\r\n          })\r\n        : await updateDoc(loggedUserRef, {\r\n              following: arrayUnion(profileId),\r\n          });\r\n\r\n    return;\r\n}\r\n\r\nexport async function updateFollowedUserFollowers(spDocId, userId, followed) {\r\n    const FollowedUserRef = doc(db, \"users\", spDocId);\r\n\r\n    followed\r\n        ? await updateDoc(FollowedUserRef, {\r\n              followers: arrayRemove(userId),\r\n          })\r\n        : await updateDoc(FollowedUserRef, {\r\n              followers: arrayUnion(userId),\r\n          });\r\n\r\n    return;\r\n}\r\n\r\nexport async function getPhotos(userId, following) {\r\n    const q = query(collection(db, \"photos\"), where(\"userId\", \"in\", following));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const userFollowedPhotos = querySnapshot.docs.map((photo) => ({\r\n        ...photo.data(),\r\n        docId: photo.id,\r\n    }));\r\n\r\n    const photosWithUserDetails = await Promise.all(\r\n        userFollowedPhotos.map(async (photo) => {\r\n            let userLikedPhoto = false;\r\n            if (photo.likes.includes(userId)) {\r\n                userLikedPhoto = true;\r\n            }\r\n\r\n            const { username, profileIconSrc } = await getUserByUserId(\r\n                photo.userId\r\n            );\r\n\r\n            return { username, ...photo, userLikedPhoto, profileIconSrc };\r\n        })\r\n    );\r\n\r\n    return photosWithUserDetails;\r\n}\r\n\r\nexport async function getUserPhotosByUsername(username) {\r\n    const { userId } = await getUserByUsername(username);\r\n    const q = query(collection(db, \"photos\"), where(\"userId\", \"==\", userId));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const photos = querySnapshot.docs\r\n        .map((item) => ({\r\n            ...item.data(),\r\n            docId: item.id,\r\n        }))\r\n        .sort((a, b) => b.dateCreated - a.dateCreated);\r\n\r\n    return photos;\r\n}\r\n\r\nexport async function addComment(docId, comment, displayName) {\r\n    const photoRef = doc(db, \"photos\", docId);\r\n\r\n    await updateDoc(photoRef, {\r\n        comments: arrayUnion({ displayName, comment }),\r\n    });\r\n\r\n    return;\r\n}\r\n\r\nexport async function isUserFollowingProfile(username, profileUserId) {\r\n    const q = query(\r\n        collection(db, \"users\"),\r\n        where(\"username\", \"==\", username),\r\n        where(\"following\", \"array-contains\", profileUserId)\r\n    );\r\n\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    //console.log(!!querySnapshot.docs[0]);\r\n    return !!querySnapshot.docs[0];\r\n}\r\n\r\nexport async function toggleFollow(\r\n    isFollowingProfile,\r\n    activeUserDocId,\r\n    profileDocId,\r\n    profileUserId,\r\n    activeUserId\r\n) {\r\n    await updateLoggedUserFollowing(\r\n        activeUserDocId,\r\n        profileUserId,\r\n        isFollowingProfile\r\n    );\r\n    await updateFollowedUserFollowers(\r\n        profileDocId,\r\n        activeUserId,\r\n        isFollowingProfile\r\n    );\r\n\r\n    return;\r\n}\r\n\r\nexport async function getAllProfiles(username) {\r\n    // const querySnapshot = await getDocs(collection(db, \"users\", limit(5)));\r\n    const q = query(collection(db, \"users\"), limit(6));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    // console.log(querySnapshot.docs[4].data());\r\n    return querySnapshot.docs\r\n        .map((user) => ({ ...user.data(), docId: user.id }))\r\n        .filter((profile) => profile.username != username);\r\n}\r\n\r\nexport async function uploadPost(file, caption, userId) {\r\n    try {\r\n        // 1 - We add a message with a loading icon that will get updated with the shared image.\r\n        const photoRef = await addDoc(collection(getFirestore(), \"photos\"), {\r\n            caption: caption,\r\n            comments: [],\r\n            dateCreated: Date.now(),\r\n            imageSrc: \"\",\r\n            likes: [],\r\n            //  photoId : `${userId}${Date.now()}`,\r\n            userId: userId,\r\n        });\r\n\r\n        // 2 - Upload the image to Cloud Storage.\r\n        const filePath = `${getAuth().currentUser.uid}/${photoRef.id}/${\r\n            file.name\r\n        }`;\r\n        const newImageRef = ref(getStorage(), filePath);\r\n        const fileSnapshot = await uploadBytesResumable(newImageRef, file);\r\n\r\n        // 3 - Generate a public URL for the file.\r\n        const publicImageUrl = await getDownloadURL(newImageRef);\r\n\r\n        // 4 - Update the chat message placeholder with the image's URL.\r\n        await updateDoc(photoRef, {\r\n            imageSrc: publicImageUrl,\r\n            storageUri: fileSnapshot.metadata.fullPath,\r\n        });\r\n    } catch (error) {\r\n        console.error(\r\n            \"There was an error uploading a file to Cloud Storage:\",\r\n            error\r\n        );\r\n    }\r\n}\r\n\r\nexport async function uploadProfileIcon(file, docId) {\r\n    try {\r\n        // 1 - We add a message with a loading icon that will get updated with the shared image.\r\n        const profileRef = doc(db, \"users\", docId);\r\n        \r\n        // 2 - Upload the image to Cloud Storage.\r\n        const filePath = `${getAuth().currentUser.uid}/${profileRef.id}/${\r\n            file.name\r\n        }`;\r\n        const newImageRef = ref(getStorage(), filePath);\r\n        const fileSnapshot = await uploadBytesResumable(newImageRef, file);\r\n\r\n        // 3 - Generate a public URL for the file.\r\n        const publicImageUrl = await getDownloadURL(newImageRef);\r\n\r\n        // 4 - Update the chat message placeholder with the image's URL.\r\n        await updateDoc(profileRef, {\r\n            profileIconSrc: publicImageUrl,\r\n           // storageUri: fileSnapshot.metadata.fullPath,\r\n        });\r\n    } catch (error) {\r\n        console.error(\r\n            \"There was an error uploading a file to Cloud Storage:\",\r\n            error\r\n        );\r\n    }\r\n}\r\n","import { createContext } from \"react\";\r\n\r\nconst FirebaseContext = createContext(null);\r\nexport default FirebaseContext;\r\n","import { createContext } from \"react\";\r\n\r\nconst UserContext = createContext(null);\r\nexport default UserContext;","import { useEffect, useState, useContext } from \"react\";\r\nimport FirebaseContext from \"../context/firebase\";\r\nimport UserContext from \"../context/user\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { getUserByUserId } from \"../services/firebase\";\r\n\r\n\r\nexport default function useUser() {\r\n    const [activeUser, setActiveUser] = useState({});\r\n    const { user } = useContext(UserContext);\r\n    const {auth} = useContext(FirebaseContext);\r\n\r\n    useEffect(() => {\r\n        async function getUserObjByUserId() {\r\n            const response = await getUserByUserId(user.uid);\r\n\r\n            setActiveUser(response);\r\n        }\r\n\r\n        if (user?.uid) {\r\n            getUserObjByUserId();\r\n        }\r\n        else{\r\n            setActiveUser({username:'You dont log in',fullName:'', userId:'',})\r\n        }\r\n\r\n        return () => {};\r\n    }, [user,auth])\r\n\r\n    return { user: activeUser };\r\n}\r\n","import { Link } from \"react-router-dom\";\r\nimport OutsideClickHandler from \"react-outside-click-handler\";\r\n\r\nexport default function SearchDropdown({ users ,setActiveSearchDropdown}) {\r\n    return (\r\n        <div className=\"search-dropdown-container\">\r\n            <OutsideClickHandler\r\n                onOutsideClick={() => {\r\n                    setActiveSearchDropdown(false);\r\n                }}\r\n            >\r\n                {users.length > 0 ? (\r\n                    users.map((user) => (\r\n                        <div\r\n                            className=\"search-user-container\"\r\n                            onClick={() => setActiveSearchDropdown(false)}\r\n                        >\r\n                            <Link\r\n                                to={`/p/${user.item.username}`}\r\n                                className=\"profile-link\"\r\n                            >\r\n                                {user.item.profileIconSrc ? (\r\n                                    <img\r\n                                        className=\"search-profile-icon\"\r\n                                        src={user.item.profileIconSrc}\r\n                                    />\r\n                                ) : (\r\n                                    <svg\r\n                                        className=\"search-profile-icon\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                    >\r\n                                        <path\r\n                                            fill-rule=\"evenodd\"\r\n                                            clip-rule=\"evenodd\"\r\n                                            d=\"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z\"\r\n                                            fill=\"currentColor\"\r\n                                        />\r\n                                        <path\r\n                                            fill-rule=\"evenodd\"\r\n                                            clip-rule=\"evenodd\"\r\n                                            d=\"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z\"\r\n                                            fill=\"currentColor\"\r\n                                        />\r\n                                    </svg>\r\n                                )}\r\n\r\n                                {user.item.username}\r\n                            </Link>\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    <div className=\"not-found\">No matches</div>\r\n                )}\r\n            </OutsideClickHandler>\r\n        </div>\r\n    );\r\n}\r\n","import { useState } from \"react\";\r\nimport { uploadPost } from \"../services/firebase\";\r\nimport OutsideClickHandler from \"react-outside-click-handler/build/OutsideClickHandler\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nexport default function UploadPost({ setActivePostUpload, user }) {\r\n    const [fileToUpload, setFileToUpload] = useState(null);\r\n    const [caption, setCaption] = useState(\"\");\r\n    const [uploading, setUploading] = useState(false);\r\n\r\n    return (\r\n        <>\r\n            <OutsideClickHandler\r\n                onOutsideClick={() => {\r\n                    setActivePostUpload(false);\r\n                }}\r\n            >\r\n                <form\r\n                    onSubmit={async function (e) {\r\n                        e.preventDefault();\r\n                        setUploading(true);\r\n                        await uploadPost(fileToUpload, caption, user.uid);\r\n                        setUploading(false);\r\n                        setCaption(\"\");\r\n                        setActivePostUpload(false);\r\n                    }}\r\n                    className=\"upload-form\"\r\n                >\r\n                    <p className=\"upload_p\">Create a post</p>\r\n\r\n                    <div className=\"form-content-container\">\r\n                        <label\r\n                            for=\"image_uploads\"\r\n                            className=\"image-upload-label\"\r\n                        >\r\n                            Choose photo to upload (PNG, JPG)\r\n                        </label>\r\n                        <input\r\n                            onChange={(e) => setFileToUpload(e.target.files[0])}\r\n                            id=\"image_uploads\"\r\n                            accept=\"image/png, image/jpeg\"\r\n                            className=\"image-upload\"\r\n                            type=\"file\"\r\n                            required\r\n                        />\r\n\r\n                        {fileToUpload ? (\r\n                            <img\r\n                                className=\"preview-img\"\r\n                                src={URL.createObjectURL(fileToUpload)}\r\n                            />\r\n                        ) : null}\r\n\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"caption-upload\"\r\n                            placeholder=\"Add caption\"\r\n                            onChange={(e) => setCaption(e.target.value)}\r\n                            value={caption}\r\n                            required\r\n                        />\r\n                        {uploading ? (\r\n                            <Loader\r\n                                type=\"TailSpin\"\r\n                                color=\"#0095F6\"\r\n                                className=\"submit-post loading-circle\"\r\n                                height={40}\r\n                                width={40}\r\n                            />\r\n                        ) : (\r\n                            <input\r\n                                disabled={!caption || !fileToUpload}\r\n                                className={`submit-post ${\r\n                                    !caption || !fileToUpload ? \"disabled\" : \"\"\r\n                                }`}\r\n                                type=\"submit\"\r\n                                value=\"Upload post\"\r\n                            />\r\n                        )}\r\n                    </div>\r\n                </form>{\" \"}\r\n            </OutsideClickHandler>\r\n\r\n            <div className=\"upload-shadow\"></div>\r\n\r\n            <div className=\"close-upload\">\r\n                <svg\r\n                    aria-label=\"Закрыть\"\r\n                    class=\"_8-yf5 \"\r\n                    color=\"#ffffff\"\r\n                    fill=\"#ffffff\"\r\n                    height=\"24\"\r\n                    role=\"img\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    width=\"24\"\r\n                >\r\n                    <polyline\r\n                        fill=\"none\"\r\n                        points=\"20.643 3.357 12 12 3.353 20.647\"\r\n                        stroke=\"currentColor\"\r\n                        stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\"\r\n                        stroke-width=\"3\"\r\n                    ></polyline>\r\n                    <line\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\"\r\n                        stroke-width=\"3\"\r\n                        x1=\"20.649\"\r\n                        x2=\"3.354\"\r\n                        y1=\"20.649\"\r\n                        y2=\"3.354\"\r\n                    ></line>\r\n                </svg>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport FirebaseContext from \"../context/firebase\";\r\nimport UserContext from \"../context/user\";\r\nimport \"../styles/NavBar.css\";\r\nimport * as ROUTES from \"../constants/routes\";\r\nimport { Link, Router, useNavigate } from \"react-router-dom\";\r\nimport { signOut } from \"firebase/auth\";\r\nimport Fuse from \"fuse.js\";\r\nimport { getAllProfiles, uploadPost } from \"../services/firebase\";\r\nimport SearchDropdown from \"./searchDropdown\";\r\nimport UploadPost from \"./uploadPost\";\r\nimport useUser from \"../hooks/use-user\";\r\n\r\nexport default function NavBar({ inHome, inProfile }) {\r\n    const [searchValue, setSearchValue] = useState(\"\");\r\n    const {\r\n        user: { profileIconSrc },\r\n    } = useUser();\r\n    // console.log(userDocInfo);\r\n    const { user, activeUsername } = useContext(UserContext);\r\n    const [activeSearchDropdown, setActiveSearchDropdown] = useState(false);\r\n    const [allUsers, setAllUsers] = useState([]);\r\n    const [activePostUpload, setActivePostUpload] = useState(false);\r\n\r\n    const fuse = new Fuse(allUsers, {\r\n        keys: [\"username\", \"fullName\"],\r\n    });\r\n\r\n    useEffect(() => {\r\n        async function getAllUsers() {\r\n            await getAllProfiles(activeUsername).then((result) =>\r\n                setAllUsers(result)\r\n            );\r\n        }\r\n        if (activeUsername) {\r\n            getAllUsers();\r\n        }\r\n        // console.log(user1);\r\n    }, [activeUsername]);\r\n\r\n    const {\r\n        firebase,\r\n        db,\r\n        auth,\r\n        signInWithEmailAndPassword,\r\n        createUserWithEmailAndPassword,\r\n    } = useContext(FirebaseContext);\r\n\r\n    return (\r\n        <div className=\"navbar-container\">\r\n            <div className=\"nav-content-container\">\r\n                <Link to={ROUTES.DASHBOARD}>\r\n                    <img\r\n                        alt=\"instagram logo\"\r\n                        className=\"logo\"\r\n                        src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\"\r\n                    />\r\n                </Link>\r\n\r\n                <div className=\"search-container\">\r\n                    <input\r\n                        onChange={({ target }) => {\r\n                            setSearchValue(target.value);\r\n                        }}\r\n                        value={searchValue}\r\n                        onFocus={() => setActiveSearchDropdown(true)}\r\n                        className={`nav-search ${\r\n                            searchValue ? null : \"search-img\"\r\n                        }`}\r\n                        placeholder={\r\n                            searchValue ? `   ${searchValue}` : \"   Search\"\r\n                        }\r\n                    />\r\n                    {activeSearchDropdown ? (\r\n                        <>\r\n                            <SearchDropdown\r\n                                users={fuse.search(searchValue)}\r\n                                setActiveSearchDropdown={\r\n                                    setActiveSearchDropdown\r\n                                }\r\n                            />{\" \"}\r\n                            <div className=\"arrow\"></div>\r\n                        </>\r\n                    ) : null}\r\n                </div>\r\n\r\n                {activePostUpload && (\r\n                    <>\r\n                        <UploadPost\r\n                            user={user}\r\n                            setActivePostUpload={setActivePostUpload}\r\n                        />\r\n                        \r\n                    </>\r\n                )}\r\n\r\n                <div className=\"nav-icons\">\r\n                    <Link to={ROUTES.DASHBOARD}>\r\n                        {inHome ? (\r\n                            <svg\r\n                                aria-label=\"Главная страница\"\r\n                                className=\"icon home\"\r\n                                color=\"#262626\"\r\n                                fill=\"#262626\"\r\n                                height=\"22\"\r\n                                role=\"img\"\r\n                                viewBox=\"0 0 48 48\"\r\n                                width=\"22\"\r\n                            >\r\n                                <path d=\"M45.5 48H30.1c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2.1-4.6-4.6-4.6s-4.6 2.1-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.6-.6 2.1 0l21.5 21.5c.3.3.4.7.4 1.1v23.5c.1.8-.6 1.5-1.4 1.5z\"></path>\r\n                            </svg>\r\n                        ) : (\r\n                            <svg\r\n                                aria-label=\"home \"\r\n                                className=\"home icon\"\r\n                                color=\"#262626\"\r\n                                fill=\"#262626\"\r\n                                height=\"22\"\r\n                                role=\"img\"\r\n                                viewBox=\"0 0 48 48\"\r\n                                width=\"22\"\r\n                            >\r\n                                <path d=\"M45.3 48H30c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2-4.6-4.6-4.6s-4.6 2-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.5-.6 2.1 0l21.5 21.5c.4.4.6 1.1.3 1.6 0 .1-.1.1-.1.2v22.8c.1.8-.6 1.5-1.4 1.5zm-13.8-3h12.3V23.4L24 3.6l-20 20V45h12.3V34.2c0-4.3 3.3-7.6 7.6-7.6s7.6 3.3 7.6 7.6V45z\"></path>\r\n                            </svg>\r\n                        )}\r\n                    </Link>\r\n\r\n                    <svg\r\n                        aria-label=\"Новая публикация\"\r\n                        className=\"icon\"\r\n                        color=\"#262626\"\r\n                        onClick={() => setActivePostUpload(!activePostUpload)}\r\n                        fill=\"#262626\"\r\n                        height=\"22\"\r\n                        role=\"img\"\r\n                        viewBox=\"0 0 48 48\"\r\n                        width=\"22\"\r\n                    >\r\n                        <path d=\"M31.8 48H16.2c-6.6 0-9.6-1.6-12.1-4C1.6 41.4 0 38.4 0 31.8V16.2C0 9.6 1.6 6.6 4 4.1 6.6 1.6 9.6 0 16.2 0h15.6c6.6 0 9.6 1.6 12.1 4C46.4 6.6 48 9.6 48 16.2v15.6c0 6.6-1.6 9.6-4 12.1-2.6 2.5-5.6 4.1-12.2 4.1zM16.2 3C10 3 7.8 4.6 6.1 6.2 4.6 7.8 3 10 3 16.2v15.6c0 6.2 1.6 8.4 3.2 10.1 1.6 1.6 3.8 3.1 10 3.1h15.6c6.2 0 8.4-1.6 10.1-3.2 1.6-1.6 3.1-3.8 3.1-10V16.2c0-6.2-1.6-8.4-3.2-10.1C40.2 4.6 38 3 31.8 3H16.2z\"></path>\r\n                        <path d=\"M36.3 25.5H11.7c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h24.6c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5z\"></path>\r\n                        <path d=\"M24 37.8c-.8 0-1.5-.7-1.5-1.5V11.7c0-.8.7-1.5 1.5-1.5s1.5.7 1.51.5v24.6c0 .8-.7 1.5-1.5 1.5z\"></path>\r\n                    </svg>\r\n\r\n                    {user ? (\r\n                        <>\r\n                            <Link to={`/p/${activeUsername}` } className=\"profile-icon-container\">\r\n                                {profileIconSrc ? (\r\n                                    <img\r\n                                        className=\"navbar-profile-icon icon\"\r\n                                        src={profileIconSrc}\r\n                                    />\r\n                                ) : (\r\n                                    <svg\r\n                                        className=\"icon profile\"\r\n                                        width=\"24\"\r\n                                        height=\"24\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        fill=\"none\"\r\n                                    >\r\n                                        <path\r\n                                            fill-rule=\"evenodd\"\r\n                                            clip-rule=\"evenodd\"\r\n                                            d=\"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z\"\r\n                                            fill=\"currentColor\"\r\n                                        />\r\n                                        <path\r\n                                            fill-rule=\"evenodd\"\r\n                                            clip-rule=\"evenodd\"\r\n                                            d=\"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z\"\r\n                                            fill=\"currentColor\"\r\n                                        />\r\n                                    </svg>\r\n                                )}\r\n\r\n                                {inProfile && (<div className=\"inprofile-mark\"></div>)}\r\n                            </Link>\r\n\r\n                            <Link to={ROUTES.LOGIN}>\r\n                                <svg\r\n                                    onClick={() => {\r\n                                        signOut(auth);\r\n                                    }}\r\n                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                    class=\"icon \"\r\n                                    fill=\"none\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    stroke=\"currentColor\"\r\n                                >\r\n                                    <path\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        stroke-width=\"2\"\r\n                                        d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\r\n                                    />\r\n                                </svg>\r\n                            </Link>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Link to={ROUTES.LOGIN}>\r\n                                <svg\r\n                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                    class=\"icon login\"\r\n                                    fill=\"none\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    stroke=\"currentColor\"\r\n                                >\r\n                                    <path\r\n                                        stroke-linecap=\"round\"\r\n                                        stroke-linejoin=\"round\"\r\n                                        stroke-width=\"2\"\r\n                                        d=\"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"\r\n                                    />\r\n                                </svg>\r\n                            </Link>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"sourceRoot":""}